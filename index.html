<!DOCTYPE html>
<html lang="fr">
<head>
<meta charset="UTF-8">
<title>HOPE CHILD DRC – Application de gestion</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{font-family:Arial;background:#f4f6f8;margin:0}
header{background:#0a4a7a;color:#fff;padding:15px;text-align:center}
header img{height:60px}
nav{display:flex;flex-wrap:wrap;background:#fff;border-bottom:1px solid #ccc}
nav button{flex:1;padding:10px;border:none;background:#fff;cursor:pointer}
nav button:hover{background:#0a4a7a;color:#fff}
section{display:none;padding:15px}
section.active{display:block}
.card{background:#fff;padding:15px;margin:10px 0;border-radius:5px}
input,select,button{padding:8px;margin:5px 0;width:100%}
table{width:100%;border-collapse:collapse;margin-top:10px}
th,td{border:1px solid #ccc;padding:8px;text-align:left}
.actions button{margin-right:5px}
.dashboard{display:grid;grid-template-columns:repeat(auto-fit,minmax(150px,1fr));gap:10px}
.stat{background:#0a4a7a;color:#fff;padding:15px;border-radius:5px;text-align:center}
</style>
</head>

<body>

<header>
<img src="logo.png" alt="HOPE CHILD DRC">
<h2>Application de gestion des données – HOPE CHILD DRC</h2>
<p>Fonctionne hors Internet • Sécurisée • Rapide</p>
</header>

<nav>
<button onclick="show('dashboard')">Dashboard</button>
<button onclick="show('personnel')">Personnel</button>
<button onclick="show('projets')">Projets</button>
<button onclick="show('beneficiaires')">Bénéficiaires</button>
<button onclick="show('partenaires')">Partenaires</button>
<button onclick="show('enqueteurs')">Enquêteurs</button>
<button onclick="show('materiel')">Matériel</button>
</nav>

<section id="dashboard" class="active">
<h3>📊 Tableau de bord</h3>
<div class="dashboard">
<div class="stat">Personnel<br><b id="cPersonnel">0</b></div>
<div class="stat">Projets<br><b id="cProjets">0</b></div>
<div class="stat">Bénéficiaires<br><b id="cBeneficiaires">0</b></div>
<div class="stat">Partenaires<br><b id="cPartenaires">0</b></div>
<div class="stat">Enquêteurs<br><b id="cEnqueteurs">0</b></div>
<div class="stat">Matériel<br><b id="cMateriel">0</b></div>
</div>
</section>

<!-- MODULES -->
<script>
const modules = ["personnel","projets","beneficiaires","partenaires","enqueteurs","materiel"];

modules.forEach(m=>{
document.write(`
<section id="${m}">
<h3>${m.toUpperCase()}</h3>
<input placeholder="Nom / Désignation" id="${m}Nom">
<button onclick="add('${m}')">Ajouter</button>
<table>
<thead><tr><th>Nom</th><th>Actions</th></tr></thead>
<tbody id="${m}List"></tbody>
</table>
</section>
`);
});

function show(id){
document.querySelectorAll("section").forEach(s=>s.classList.remove("active"));
document.getElementById(id).classList.add("active");
}

function load(m){
let data=JSON.parse(localStorage.getItem(m)||"[]");
let list=document.getElementById(m+"List");
list.innerHTML="";
data.forEach((v,i)=>{
list.innerHTML+=`<tr>
<td>${v}</td>
<td class="actions">
<button onclick="edit('${m}',${i})">✏️</button>
<button onclick="del('${m}',${i})">🗑️</button>
</td></tr>`;
});
count();
}

function add(m){
let input=document.getElementById(m+"Nom");
if(!input.value)return;
let data=JSON.parse(localStorage.getItem(m)||"[]");
data.push(input.value);
localStorage.setItem(m,JSON.stringify(data));
input.value="";
load(m);
}

function del(m,i){
if(!confirm("Supprimer ?"))return;
let data=JSON.parse(localStorage.getItem(m));
data.splice(i,1);
localStorage.setItem(m,JSON.stringify(data));
load(m);
}

function edit(m,i){
let data=JSON.parse(localStorage.getItem(m));
let nv=prompt("Modifier :",data[i]);
if(nv){
data[i]=nv;
localStorage.setItem(m,JSON.stringify(data));
load(m);
}
}

function count(){
cPersonnel.innerText=JSON.parse(localStorage.getItem("personnel")||"[]").length;
cProjets.innerText=JSON.parse(localStorage.getItem("projets")||"[]").length;
cBeneficiaires.innerText=JSON.parse(localStorage.getItem("beneficiaires")||"[]").length;
cPartenaires.innerText=JSON.parse(localStorage.getItem("partenaires")||"[]").length;
cEnqueteurs.innerText=JSON.parse(localStorage.getItem("enqueteurs")||"[]").length;
cMateriel.innerText=JSON.parse(localStorage.getItem("materiel")||"[]").length;
}

modules.forEach(load);
</script>

</body>
</html>
